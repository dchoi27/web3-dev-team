# nft.storage chunked CAR uploads

Authors: [@alanshaw](https://github.com/alanshaw) [@vasco-santos](https://github.com/vasco-santos) [@olizilla](https://github.com/olizilla)

## What is the problem this project solves?
_Describe the status quo, including any relevant context on the problem you're seeing that this project should solve. Who is the user you're solving for, and why do they care about this problem? Wherever possible, include pain points or problems that you've seen users experience to help motivate why solving this problem works towards top-line objectives._ 

NFT.storage has a hard limit of 100MB for uploads - a limit imposed by Cloudflare Workers (the server side technology that runs the site).

This project proposes a way to work around this limit by sending _multiple_ requests of <100MB.

## Impact
_What goals/OKRs are being addressed (for w3dt, a specific program, etc.)? Why is this project important? What do we get with this project that we can't get without it?_

Allows NFT assets over 100MB to be reliably uploaded to nft.strorage.

This has been requested by multiple marketplaces and is necessary for NFTs that contain video content.

## The idea
_Describe the proposed project solution, at a very high level. Stay at the level of the high-level requirements. Diagrams and interface descriptions can be useful, if you have any that help clarify and explain the idea._

1. Generate a CAR file for the content.

    This has the added benefit of allowing the creator to know the CID up front, allowing them to mint an NFT on a blockchain and upload the content to the nft.storage in parallel.

    Note: the CAR file must be generated by the NFT creator using a tool such as [ipfs-car](https://github.com/vasco-santos/ipfs-car).
    
2. Split the CAR file into chunks of <100MB.

    Walk the DAG to pack sub-graphs into each CAR file that is output. Every CAR has the same root CID, but contains a different portion of the DAG.
    
    There is a JS module that will perform the chunking: https://github.com/alanshaw/carbites
    
3. Upload the chunks.

    As nft.storage receives the CAR chunks it adds them to IPFS Cluster, pinning the root.

## Success/acceptance criteria (optional)
_How do we know we're done with this project? How do we know we're successful? This field is OPTIONAL for the first draft of an MPP. Sometimes this field needs to be filled out once we have more detail on the shape of the actual solution._

* Assets larger than 100MB can be uploaded to nft.storage.
* A user uploads a 1GB asset to nft.storage.

## Detailed plans (optional)
_Link to more detailed project plans, e.g. product requirements documents (PRDs) and technical design docs, once they have been created for this project._

## Program (optional)
_If this project is part of a program, please indicate the relevant program here._

/Nitro/NFT
